<?xml version="1.0" encoding="UTF-8"  ?>
<!-- xml선언부-->

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<!-- myBatis-config.xml의     mapper로 반드시 등록되어야 한다 --> 
<mapper namespace="admin">

	<!-- 회원리스트 조예인-->
	<select id="getMemberList" resultType="memberDTO">
		select mnick,mmail,mclass,mname,mphone,mdate
		from member
		where mno>0
		<include refid="searchCondition"/>
		order by mno desc
		limit #{startList},#{listSize}
	</select>
	
	<!-- 전체게시물 수 조회-->
	<select id="getMemberListCnt" resultType="int">
		select  count(*) as listCnt
		from 		member
		where mno>0
		<include refid="searchCondition"/>
	</select> 
	
	<sql id="searchCondition">
		<trim prefix="WHERE" prefixOverrides="AND|OR">
				<if test="searchType == mnick and keyword != null">
					and mnick like '%#{keyword}%'
				</if>
				<if test="searchType == mmail and keyword != null">
					and mmail like '%#{keyword}%'
				</if>
		</trim>
	</sql>
</mapper>














