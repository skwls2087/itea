<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/beans     
                      http://www.springframework.org/schema/beans/spring-beans.xsd 
		                  http://www.springframework.org/schema/context 
                      http://www.springframework.org/schema/context/spring-context.xsd">	

  <!-- 자동주입을 위한 선언 -->
  <context:annotation-config/>

  <!--	컨넥션 풀 설정을 위한 작업 -->
	<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.cj.jdbc.Driver"></property>
        <property name="url" value="jdbc:mysql://192.168.56.93:3306/itea?characterEncoding=utf8&amp;serverTimezone=UTC&amp;autoReconnection=true"></property>
        <property name="username" value="root"></property>   
        <property name="password" value="1234"></property>
    </bean>
    
	<!-- myBatis 등록 -->
	<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
	
	  <!-- myBatis를 위한 환경 설정 파일을 어디에 무슨이름으로  만들어 놓을지를 지정-->
	  <property name="configLocation" >
			<value>classpath:/com/itea/myBatis/myBatis-config.xml</value>
	  </property>
	  
	   <!-- (중요부분) myBatis와 연결하는 데이터베이스(컨넥션 풀)을 지정-->
	  <property name="dataSource" ref="dataSource" />
	</bean>
	
	<bean id="sqlSession" 
	      class="org.mybatis.spring.SqlSessionTemplate" destroy-method="clearCache">    
		<constructor-arg index="0" ref="sqlSessionFactory" />
	</bean>
	
	<!-- DI선언 -->
	
	<!-- DAO -->
	<bean id="joinDAO" class="com.itea.member.dao.JoinDAO">
		<property name="sqlSessionTemplate" ref ="sqlSession"/>
	</bean>
	
	<bean id ="loginDAO" class = "com.itea.member.dao.LoginDAO">
		<property name ="sqlSessionTemplate" ref  ="sqlSession"/> 
	</bean>
	<bean id="findidpwDAO" class="com.itea.member.dao.FindIdPwDAO">
		<property name="sqlSessionTemplate" ref ="sqlSession"/> 
	</bean>
	<bean id ="modifyDAO" class = "com.itea.member.dao.ModifyDAO">
		<property name ="sqlSessionTemplate" ref  ="sqlSession"/> 
	</bean>
	
	<!-- Service -->
	<bean id="loginSV" class="com.itea.member.service.LoginService"/>
	<bean id="findidpwSV" class="com.itea.member.service.FindIdPwService"/>
	<bean id="modifySV" class="com.itea.member.service.ModifyService"/>
	
</beans>










