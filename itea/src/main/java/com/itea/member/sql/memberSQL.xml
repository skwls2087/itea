<?xml version="1.0" encoding="UTF-8"  ?>
<!-- xml선언부-->

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- element(요소)    attribute(속성성)
           최상위 element는 무조건 1개여야만 한다
 -->
 
<!-- myBatis-config.xml의     mapper로 반드시 등록되어야 한다 --> 
<mapper namespace="member">

	<!-- 로그인 -->
	<!-- id와 pw가 전부 일치하는 회원 조회 -->
	<select id="login" resultType="memberDTO">
		select *
		from member
		where mmail=#{mmail} and mpw=#{mpw} and mclass=#{mclass}
	</select>
	<!-- 이메일이 일치하는 회원 조회 -->
	<select id="snsLogin" resultType="memberDTO">
		select *
		from member
		where mmail=#{mmail} and mclass=#{mclass}
	</select>
	
	
	<!--정보수정 폼 불러오기  -->
		<select id="modifyInfo" resultType="memberDTO">
			select *
			from member
			where mno= #{mno}
		</select>
	<!--회원정보 수정--> 
		<update id="modify" parameterType="memberDTO" >
		update member
		set	mpw 		= #{mpw},
				mnick		= #{mnick},
				mphone	= #{mphone},
				mgradu	= #{mgradu}	
		where mno=    #{mno}
		</update>
		
	
	<!-- 회원가입 -->
	<!-- 회원가입 일반-->
	<insert id="joinProc" parameterType="memberDTO">
		insert into member(mmail,mpw,mname,mnick,mphone,mbirth,msex,mgradu)
		values(#{mmail},#{mpw},#{mname},#{mnick},#{mphone},#{mbirth},#{msex},#{mgradu})
	</insert>
	
	<!-- 회원가입 SNS-->
	<insert id="joinProcSNS" parameterType="memberDTO">
		insert into member(mmail,mname,mnick,mphone,mbirth,msex,mgradu)
		values(#{mmail},#{mname},#{mnick},#{mphone},#{mbirth},#{msex},#{mgradu})
	</insert>
	
	<!-- 메일에 해당하는 회원 수 -->
	<select id="mailCheck" parameterType="memberDTO" resultType="int">
		select count(*)
		from member
		where mmail=#{mmail} and mclass=#{mclass}
	</select>
</mapper>













